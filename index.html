<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy Birthday, My Anukriti ğŸ’–</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

<style>
  :root{
    --c1:#efe9ff; --c2:#ffd6ea; --c3:#ffe7c6; --c4:#fff8d9;
    --accent:#7b3df0; --card: rgba(255,255,255,0.98); --muted:#4b4f64;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:"Poppins",Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
    color:#111; background: linear-gradient(120deg,var(--c1) 0%, var(--c2) 30%, var(--c3) 60%, var(--c4) 100%);
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; line-height:1.45; scroll-behavior:smooth;
  }

  .wrap{ max-width:980px; margin:28px auto; padding:20px; }

  header.hero{
    display:flex; align-items:center; justify-content:space-between; gap:12px;
    background: var(--card); padding:14px 18px; border-radius:14px; box-shadow: 0 14px 50px rgba(80,40,140,0.06);
  }
  .title { font-family:'Playfair Display', serif; font-size:1.5rem; color:var(--accent); margin:0; opacity:0; animation:fadeIn 1.2s ease forwards; }
  .subtitle{ color:var(--muted); margin-top:6px; font-size:0.95rem }

  .audio-controls{ display:flex; gap:10px; align-items:center }
  .btn { padding:8px 12px; border-radius:10px; cursor:pointer; border:none;
        background:linear-gradient(90deg,#ff7ab3,#7c4dff); color:#fff; font-weight:700;
        box-shadow: 0 8px 26px rgba(124,77,255,0.14); }
  .btn.ghost{ background:transparent; border:2px solid rgba(0,0,0,0.06); color:#111; box-shadow:none }

  .photos{ display:flex; gap:18px; justify-content:center; margin-top:18px; flex-wrap:wrap }
  .photo{ width:200px; border-radius:12px; overflow:hidden; background:var(--card); padding:8px;
          box-shadow:0 12px 36px rgba(40,25,80,0.06); display:flex; align-items:center; justify-content:center;
          opacity:0; transform:translateY(18px); animation:fadeInUp 1s ease forwards; animation-delay:0.7s }
  .photo img{ width:100%; height:140px; object-fit:contain; border-radius:8px; display:block }

  .card{ margin-top:18px; background:var(--card); padding:16px; border-radius:12px; box-shadow: 0 16px 46px rgba(50,40,90,0.06) }
  .questions{ display:flex; flex-direction:column; gap:12px; margin-top:8px }
  .q{ padding:12px; border-radius:10px; background:linear-gradient(180deg,#fff,#fbfdff) }
  .q p{ margin:0 0 10px 0; font-weight:700; color:#222 }
  .btn-row{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-bottom:6px }
  .small-quote{ margin-top:8px; color:#5a2ea6; font-style:italic; opacity:0; transform:translateY(6px); transition:opacity .45s, transform .45s; text-align:center }
  .small-quote.show{ opacity:1; transform:translateY(0) }

  .floating{ position:fixed; left:0; top:0; right:0; bottom:0; pointer-events:none; z-index:9999; overflow:visible }
  .float-item{ position:absolute; width:52px; height:52px; will-change:transform,opacity; transform-origin:center; }

  .love-letter{ margin-top:18px; padding:20px; border-radius:12px; background: linear-gradient(180deg,#fff,#fff8fb);
                box-shadow:0 18px 60px rgba(50,30,80,0.06); opacity:0; transform:translateY(12px); transition: opacity .9s ease, transform .9s ease; text-align:left }
  .love-letter.show{ opacity:1; transform:translateY(0) }
  .love-letter h2{ margin:0; color:var(--accent); font-family:'Playfair Display', serif }

  .secret{ margin-top:20px; text-align:center; color:var(--accent); font-weight:700; opacity:0; transition:opacity 1.2s; }
  .secret.show{ opacity:1 }

  .music-fixed{ position:fixed; right:14px; bottom:14px; z-index:10010 }
  .music-bar{ width:220px; height:58px; border-radius:10px; overflow:hidden; background:var(--card); box-shadow:0 20px 60px rgba(60,40,100,0.08); display:flex; align-items:center; justify-content:center }

  @keyframes fadeIn { to { opacity:1 } }
  @keyframes fadeInUp { to { opacity:1; transform:translateY(0) } }

  @media (max-width:760px){
    .photo{ width:44vw } .photo img{ height:40vw }
    header.hero{ flex-direction:column; align-items:flex-start; gap:10px }
    .music-fixed{ left:10px; right:auto }
  }
</style>
</head>
<body>
  <div class="wrap">
    <header class="hero" role="banner">
      <div>
        <div class="title">Happy Birthday, My Anukriti ğŸ’– â€” Life is a journey, but ours is eternal. Letâ€™s continue it together.</div>
        <div class="subtitle">Bright evenings, laughter, and little surprises â€” made for you.</div>
      </div>

      <div class="audio-controls">
        <button id="enableAudio" class="btn">Enable Audio</button>
        <button id="retryAudio" class="btn ghost">Retry Play</button>
      </div>
    </header>

    <div class="photos" role="list" aria-label="Photos">
      <div class="photo" role="listitem"><img id="photo1" src="https://raw.githubusercontent.com/Neothe15/happy-birthday-anukriti/refs/heads/main/photo1.jpg" alt="photo1"></div>
      <div class="photo" role="listitem"><img id="photo2" src="https://raw.githubusercontent.com/Neothe15/happy-birthday-anukriti/refs/heads/main/photo2.jpg" alt="photo2"></div>
    </div>

    <div class="card" aria-live="polite">
      <h3 style="margin:0;color:var(--accent); font-family:'Playfair Display', serif">A little heart-quiz</h3>

      <div class="questions">
        <div class="q" id="q1">
          <p>1) Are you ready for us?</p>
          <div class="btn-row"><button onclick="onYes(1)" class="btn">Yes ğŸ’•</button><button onclick="onNo(1)" class="btn ghost">No ğŸ˜…</button></div>
          <div id="quote1" class="small-quote"></div>
        </div>

        <div class="q" id="q2">
          <p>2) I am afraid my love for you will only accentuate â€” does that work?</p>
          <div class="btn-row"><button onclick="onYes(2)" class="btn">Yes ğŸ’</button><button onclick="onNo(2)" class="btn ghost">No ğŸ˜…</button></div>
          <div id="quote2" class="small-quote"></div>
        </div>

        <div class="q" id="q3">
          <p>3) Would you sing with me when the night is soft and slow?</p>
          <div class="btn-row"><button onclick="onYes(3)" class="btn">Yes ğŸµ</button><button onclick="onNo(3)" class="btn ghost">No ğŸ§</button></div>
          <div id="quote3" class="small-quote"></div>
        </div>

        <div class="q" id="q4">
          <p>4) Will you share warm wine and silly stories with me?</p>
          <div class="btn-row"><button onclick="onYes(4)" class="btn">Yes ğŸ¥‚</button><button onclick="onNo(4)" class="btn ghost">No ğŸµ</button></div>
          <div id="quote4" class="small-quote"></div>
        </div>

        <div class="q" id="q5">
          <p>5) Do you promise to keep laughing with me, even over small cheese plates?</p>
          <div class="btn-row"><button onclick="onYes(5)" class="btn">Yes ğŸ§€</button><button onclick="onNo(5)" class="btn ghost">No ğŸ˜‹</button></div>
          <div id="quote5" class="small-quote"></div>
        </div>

        <div class="q" id="q6">
          <p>6) Will you hold my hand through little storms and bright mornings?</p>
          <div class="btn-row"><button onclick="onYes(6)" class="btn">Yes ğŸ¤</button><button onclick="onNo(6)" class="btn ghost">No ğŸ˜…</button></div>
          <div id="quote6" class="small-quote"></div>
        </div>
      </div>

      <div style="text-align:center;margin-top:12px"><button class="btn ghost" onclick="revealLetter()">Skip to love letter</button></div>
    </div>

    <div id="loveLetter" class="love-letter" role="region" aria-live="polite">
      <h2>ğŸ’Œ A Letter For You, Anukriti</h2>
      <p style="margin-top:10px; color:#333; line-height:1.6;">
        Anukriti, you are the poetry my soul waited a lifetime to hear.<br><br>
        With you, every silence feels like a melody, and every heartbeat finds its rhythm.<br><br>
        Forever yours â€” Utkarsh ğŸ’–
      </p>
    </div>

    <div style="height:18px"></div>
    <div id="secretText" class="secret">I love you more than words ever could. ğŸ’</div>
    <div style="height:140px"></div>
  </div>

  <div class="floating" id="floating"></div>

  <div class="music-fixed" aria-hidden="false">
    <div class="music-bar" title="Married Life (Piano Version)">
      <iframe id="scPlayer" width="100%" height="48" scrolling="no" frameborder="no" allow="autoplay"
        src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/soundcloud%253Atracks%253A222963773&color=%239d89ff&auto_play=false&hide_related=true&visual=false">
      </iframe>
    </div>
  </div>

<script>
/* state and quotes */
const quotes = {
  1: "You make ordinary days extraordinary.",
  2: "Tulips always remind me of you â€” gentle and bright.",
  3: "Lilies and soft mornings â€” that's you.",
  4: "Sunshine, smiles, and you â€” forever.",
  5: "Warm wine, silly stories, endless laughter.",
  6: "Through storms and mornings, always together."
};
const answered = {1:false,2:false,3:false,4:false,5:false,6:false};
let musicStarted = false;

/* floating theme control:
   - currentInterval: spawns continuously for the active theme
   - activeTheme: which theme currently running
   When a new theme starts we clear previousInterval and remove existing floats.
*/
let currentInterval = null;
let activeTheme = null;
const floating = document.getElementById('floating');

function clearFloatingTheme(){
  // stop continuous spawn
  if(currentInterval) { clearInterval(currentInterval); currentInterval = null; }
  activeTheme = null;
  // gently remove existing float items
  document.querySelectorAll('.float-item').forEach(el=>{
    el.style.transition = 'transform .6s ease, opacity .6s ease';
    el.style.opacity = '0';
    setTimeout(()=> el.remove(), 620);
  });
}

/* spawn item: accepts emoji string or svg string; slow graceful drift upward */
function spawnFloating(content, leftPx=null, duration=10000, size=56){
  const el = document.createElement('div');
  el.className = 'float-item';

  // content: emoji (like 'ğŸŒ·') or html string (SVG)
  if(typeof content === 'string' && content.trim().startsWith('<svg')){
    el.innerHTML = content;
  } else {
    // emoji/text
    el.innerHTML = `<div style="font-size:${Math.max(22, size*0.5)}px;display:flex;align-items:center;justify-content:center;height:100%">${content}</div>`;
  }

  el.style.left = (leftPx ?? Math.random()*(window.innerWidth - size - 40)) + 'px';
  el.style.bottom = (-20 - Math.random()*120) + 'px';
  el.style.opacity = '0';
  el.style.width = size + 'px';
  el.style.height = size + 'px';
  el.style.pointerEvents = 'none';
  floating.appendChild(el);

  // gentle horizontal drift range
  const driftX = (Math.random()*260) - 130; // px left/right drift
  const rot = (Math.random()*30) - 15;
  // pick slow duration between given and +3s random
  const dur = duration + Math.random()*3000;

  requestAnimationFrame(()=>{
    el.style.transition = `transform ${dur/1000}s linear, opacity 1.2s linear`;
    // move diagonally slowly upward with a tiny rotation and scale wiggle
    el.style.transform = `translate(${driftX}px, -110vh) rotate(${rot}deg) scale(${0.95 + Math.random()*0.2})`;
    el.style.opacity = '1';
  });

  // add gentle float (subtle vertical bobbing) using Web Animations API
  el.animate(
    [{ transform: 'translateY(0)' }, { transform: 'translateY(-8px)' }, { transform: 'translateY(0)' }],
    { duration: 1800 + Math.random()*1000, iterations: Infinity, easing: 'ease-in-out' }
  );

  // remove after finished leaving screen (keep longer to appear continuous)
  setTimeout(()=> {
    el.style.transition = 'transform .6s ease, opacity .6s ease';
    el.style.opacity = '0';
    setTimeout(()=> el.remove(), 650);
  }, dur + 900);
}

/* theme spawners - each returns a function that spawns that theme once */
function spawnHearts(){ spawnFloating('ğŸ’•', null, 11000, 52); spawnFloating('ğŸˆ', null, 11000, 48); }
function spawnTulips(){ spawnFloating('ğŸŒ·', null, 12000, 56); spawnFloating('ğŸ’®', null, 12000, 52); }
function spawnSunflowers(){ spawnFloating('ğŸŒ»', null, 11000, 56); }
function spawnNotes(){ spawnFloating('ğŸµ', null, 10000, 44); spawnFloating('ğŸ¶', null, 10000, 44); }
function spawnWineCheese(){ spawnFloating('ğŸ·', null, 11000, 46); spawnFloating('ğŸ§€', null, 11000, 46); }
function spawnStars(){ spawnFloating('âœ¨', null, 11000, 40); spawnFloating('â­', null, 11000, 44); }

/* start a continuous theme: spawns initially then sets interval to keep spawning.
   intervalMs: spawn frequency; spawnFn: function to spawn one set
*/
function startTheme(theme){
  clearFloatingTheme();
  activeTheme = theme;

  let spawnFn, intervalMs;
  if(theme === 'hearts'){ spawnFn = () => { spawnHearts(); spawnHearts(); }; intervalMs = 900; }
  else if(theme === 'tulips'){ spawnFn = () => { for(let i=0;i<3;i++) spawnTulips(); }; intervalMs = 850; }
  else if(theme === 'sunflowers'){ spawnFn = () => { for(let i=0;i<2;i++) spawnSunflowers(); }; intervalMs = 900; }
  else if(theme === 'notes'){ spawnFn = () => { spawnNotes(); spawnNotes(); }; intervalMs = 800; }
  else if(theme === 'winecheese'){ spawnFn = () => { spawnWineCheese(); spawnWineCheese(); }; intervalMs = 950; }
  else if(theme === 'stars'){ spawnFn = () => { spawnStars(); spawnStars(); spawnStars(); }; intervalMs = 750; }
  else { return; }

  // initial burst
  spawnFn();
  // continuous spawn while theme active
  currentInterval = setInterval(()=> { spawnFn(); }, intervalMs);
}

/* ====== mapping Yes clicks to themes ====== */
function onYes(n){
  if(answered[n]) { smallToast('Already answered â¤ï¸'); return; }
  answered[n] = true;
  document.getElementById('quote'+n).textContent = quotes[n];
  document.getElementById('quote'+n).classList.add('show');

  // start sound on first yes (user gesture)
  if(!musicStarted){ musicStarted = true; startSoundCloud(); }

  playChime();

  // pick theme and start
  if(n===1){ startTheme('hearts'); try{ confetti({ particleCount: 20, spread: 30, origin:{ y:0.9 } }); }catch(e){} }
  else if(n===2){ startTheme('tulips'); }
  else if(n===3){ startTheme('sunflowers'); }
  else if(n===4){ startTheme('notes'); try{ confetti({ particleCount: 28, spread: 40, origin:{ y:0.9 } }); }catch(e){} }
  else if(n===5){ startTheme('winecheese'); }
  else if(n===6){ startTheme('stars'); try{ confetti({ particleCount: 60, spread: 80, origin:{ y:0.8 } }); }catch(e){} }

  smallToast('Yay ğŸ’•');

  // reveal love letter when all 6 yes
  const all = Object.values(answered).every(v=>v===true);
  if(all){
    setTimeout(()=> {
      document.getElementById('loveLetter').classList.add('show');
      document.getElementById('secretText').classList.add('show');
      try{ confetti({ particleCount: 140, spread: 90, origin: { y: 0.6 } }); }catch(e){}
    }, 900);
  }
}

function onNo(n){ smallToast('Aww ğŸ˜… maybe later!'); }

function smallToast(msg){
  const t = document.createElement('div'); t.textContent = msg;
  Object.assign(t.style,{position:'fixed',left:'50%',top:'18px',transform:'translateX(-50%)',background:'rgba(0,0,0,0.72)',color:'#fff',padding:'8px 12px',borderRadius:'999px',zIndex:10020});
  document.body.appendChild(t); setTimeout(()=> t.remove(),1600);
}

function playChime(){
  try{
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const o = ctx.createOscillator(), g = ctx.createGain();
    o.type = 'sine'; o.frequency.value = 880;
    g.gain.setValueAtTime(0, ctx.currentTime);
    g.gain.linearRampToValueAtTime(0.12, ctx.currentTime+0.01);
    g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime+0.9);
    o.connect(g); g.connect(ctx.destination); o.start(); o.stop(ctx.currentTime+0.9);
  }catch(e){}
}

/* SoundCloud start (first user gesture) */
const scIframe = document.getElementById('scPlayer');
function startSoundCloud(){
  try{
    if(!scIframe) return;
    if(scIframe.src.indexOf('auto_play=true') === -1){
      scIframe.src = scIframe.src.replace('auto_play=false','auto_play=true');
    }
  }catch(e){}
}
document.getElementById('enableAudio').addEventListener('click', ()=>{ startSoundCloud(); smallToast('Attempted to enable audio â€” if blocked, tap the player.'); });
document.getElementById('retryAudio').addEventListener('click', ()=>{ startSoundCloud(); smallToast('Retry triggered.'); });

/* initial ambient hint */
setTimeout(()=> { startTheme('tulips'); setTimeout(()=> clearFloatingTheme(), 1600); }, 900);

/* reveal secret on scroll near bottom */
window.addEventListener('scroll', ()=> {
  const s = document.getElementById('secretText');
  if(window.innerHeight + window.scrollY >= document.body.offsetHeight - 220) s.classList.add('show');
});

/* optional: clear theme when user navigates away (cleanup) */
window.addEventListener('beforeunload', ()=> clearFloatingTheme());
</script>

</body>
</html>
